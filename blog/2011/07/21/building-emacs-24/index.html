<!DOCTYPE html>

<html><head><link href="http://pro.grammati.ca//blog/2011/07/21/building-emacs-24/index.html" rel="canonical" /><meta content="True" name="HandheldFriendly" /><meta content="320" name="MobileOptimized" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><meta charset="utf-8" /><title>pro.grammati.ca</title><link href="/css/32ca7f0b6575/theme.css" rel="stylesheet" /><link href="/css/d4de3943cb2d/zenburn-custom.css" rel="stylesheet" /><link href="//fonts.googleapis.com/css?family=Cardo|Limelight" rel="stylesheet" type="text/css" /></head><body><header role="banner"><hgroup><h1><a href="/">pro.grammati.ca</a></h1></hgroup></header><nav role="navigation"><ul class="main-navigation"><li><a href="/blog/">Blog</a></li><li><a href="/atom.xml">Feed</a></li><li><a href="/about/">About</a></li></ul></nav><div id="main"><div id="content"><article class="entry" role="article"><header><h1 class="entry-title">Building Emacs 24</h1><p class="meta"><time datetime="2011-07-21T00:00:00.000Z">2011-07-21</time></p></header><div class="body entry-content"><p>Emacs 24 is not released, but building it is not so hard.</p><p>Here's what I did, on Ubuntu 11.04.</p><ol><li><p><b>git clone git://github.com/emacsmirror/emacs.git</b><br />This takes a while - it's big.</p></li><li><p>The INSTALL file says to run configure, but there ain't no such thing. After some head-scratching, I figure out that I have to run <b>autogen.sh</b> to create it.</p></li><li><p>run <b>./configure</b> - attempt #1<br /></p><blockquote>checking for makeinfo... no<br />configure: error: You do not seem to have makeinfo &gt;= 4.6, and your<br />source tree does not seem to have pre-built manuals in the 'info' directory.<br />Either install a suitable version of makeinfo, or re-run configure<br />with the `--without-makeinfo' option to build without the manuals.</blockquote><div><br /></div><div>The obvious solution: "sudo apt-get install makeinfo" doesn't work. Google reveals that you actually need "<b>sudo apt-get install texinfo</b>".</div><div><br /></div><div>4) <b>./configure</b> - attempt #2</div><div><br /></div><div><div><blockquote>checking for xaw3d... no<br />checking for libXaw... configure: error: No X toolkit could be found.<br />If you are sure you want Emacs compiled without an X toolkit, pass<br />  --with-x-toolkit=no<br />to configure.  Otherwise, install the development libraries for the toolkit<br />that you want to use (e.g. Gtk+) and re-run configure.</blockquote></div></div><div><br /></div><div>Well, I want to use Gtk, so by a process of wild guesswork I figure out that "<b>sudo apt-get install libgtk2.0-dev</b>" is the right incantation.</div><div><br /></div><div>5) <b>./configure</b> - attempt #3</div></li></ol></div><div><div><blockquote>checking for gif_lib.h... no<br />configure:
error: The following required libraries were not found:<br />   
libXpm libjpeg libgif/libungif libtiff<br />Maybe some development
libraries/packages are missing?<br />If you don't want to link with them give<br />    --with-xpm=no --with-jpeg=no --with-gif=no --with-tiff=no<br />as options to configure</blockquote></div></div><div>Hmm, I don't really use
emacs to view images, but I would rather build a fully functional version, so...
"<b>sudo apt-get install libxpm-dev libjpeg-dev libgif-dev libtiff4-dev</b>".
Where would society be without tab-completion of package names? It would be
anarchy, I tell you.<ol start="6"><li><p><b>./configure</b> - attempt #4. Yay, victory!</p></li><li><p><b>make</b><br />This takes a while too.</p></li><li><p><b>sudo make install</b><br />This is pretty quick.</p></li></ol><p>At this point, I congratulate myself for getting this far without reading more than a paragraph or so of instructions. That's the way real men do it. But unfortunately, I'm now lost - I don't know where my shiny new emacs is, or how I make it my default. I'll have to break down and do some research.</p><p>Scanning Makefile I find "prefix=/usr/local", and sure enough, there is a /usr/local/bin/emacs-24.0.50, and it works.</p><p>I don't know much about update-alternatives, but after some poking around I manage:<br /><b>sudo update-alternatives --install /usr/bin/emacs emacs /usr/local/bin/emacs-24.0.50 2</b><br />That last "2" is a priority, but I didn't have any idea what number to pick. I found out afterwards that emacs 23 has a priority of 26. Huh? Whatever, doesn't matter. I do "<b>sudo update-alternatives --config emacs</b>", and pick the shiny new emacs-24. Now typing "emacs" at the commandline gives me the new hotness. Yay for me.</p></div><div><br /></div></article></div></div><footer role="contentinfo"><p>Copyright © 2020 - Chris Perkins</p></footer></body></html>